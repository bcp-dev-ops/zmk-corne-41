# ==========================================
# FileName: corne.conf
# Date: 10.26.2025
# Author: bcp-dev-ops 
# Brief: configuration file for ZMK firmware
# Board: nice_nano
# ==========================================

# System -----------------------------------
CONFIG_ZMK_KEYBOARD_NAME="Corne v41 ZMK"
# Disable settings reset on start
CONFIG_ZMK_SETTINGS_RESET_ON_START=n
# Milliseconds to debounce settings write to flash memory
CONFIG_ZMK_SETTINGS_SAVE_DEBOUNCE=60000
# Enable words-per-minute tracking
CONFIG_ZMK_WPM=y
# Heap memory pool size in bytes
CONFIG_HEAP_MEM_POOL_SIZE=8192


# Keyboard physicial split -----------------
# Enable split keyboard support
CONFIG_ZMK_SPLIT=y
# Enable central role for split keyboard
CONFIG_ZMK_SPLIT_ROLE_CENTRAL=y
# Disable HID indicators on peripheral side
CONFIG_ZMK_SPLIT_PERIPHERAL_HID_INDICATORS=n

# Bluetooth (used)
CONFIG_ZMK_SPLIT_BLE=y
# Max peripherals to connect to central side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_PERIPHERALS=1
# Enable battery level fetching on central side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
# Enable battery level proxying on central side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
# Same as CONFIG_ZMK_SPLIT_BLE_CENTRAL_PERIPHERALS
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_QUEUE_SIZE=1
# Max number of key events to queue from peripheral side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_POSITION_QUEUE_SIZE=5
# Stack size for split run thread on central side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_SPLIT_RUN_STACK_SIZE=512
# Max number of events in split run queue on central side
CONFIG_ZMK_SPLIT_BLE_CENTRAL_SPLIT_RUN_QUEUE_SIZE=5
# Stack size for split run thread on peripheral side
CONFIG_ZMK_SPLIT_BLE_PERIPHERAL_STACK_SIZE=756
# Priority for split run thread on peripheral side
CONFIG_ZMK_SPLIT_BLE_PERIPHERAL_PRIORITY=5
# Max number of key events to queue on peripheral side to send to central side
CONFIG_ZMK_SPLIT_BLE_PERIPHERAL_POSITION_QUEUE_SIZE=10

# Wired (not used)
# Disable wired split keyboard support
CONFIG_ZMK_SPLIT_WIRED=n


# USB --------------------------------------
# Enable ZMK as a USB keyboard
CONFIG_ZMK_USB=y
# Disable USB boot keyboard compatibility
CONFIG_ZMK_USB_BOOT=n
# USB Vendor ID
CONFIG_USB_DEVICE_VID=0x1D50
# USB Product ID
CONFIG_USB_DEVICE_PID=0x615E
# USB Manufacturer string
CONFIG_USB_DEVICE_MANUFACTURER="ZMK"
# USB HID Polling interval
CONFIG_USB_HID_POLL_INTERVAL_MS=1
# USB init priority
CONFIG_ZMK_USB_INIT_PRIORITY=50


# Bluetooth --------------------------------
# Enable Bluetooth support
CONFIG_BT=y
# Enable ZMK Bluetooth keyboard functionality
CONFIG_ZMK_BLE=y
# Enable Battery status reporting service
CONFIG_BT_BAS=y
# Implied by above
CONFIG_ZMK_BATTERY_REPORTING=y
# seconds
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=60
# Max simultaneous Bluetooth connections
CONFIG_BT_MAX_CONN=5
# Max paired devices
CONFIG_BT_MAX_PAIRED=5
# Bluetooth init priority
CONFIG_ZMK_BLE_INIT_PRIORITY=50
# Bluetooth thread priority
CONFIG_ZMK_BLE_THREAD_PRIORITY=5
# Disable passkey entry for pairing
CONFIG_ZMK_BLE_PASSKEY_ENTRY=n


# Power Options -----------------------------
# Enable external power support
CONFIG_ZMK_EXT_POWER=y
# Enable sleep functionality
CONFIG_ZMK_SLEEP=y
# 15 min (15*60*1000ms)
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000
# 1 min  (60*1000ms)
CONFIG_ZMK_IDLE_TIMEOUT=60000
# 10 min (10*60*1000ms)
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=600000
# 2 min  (2*60*1000ms)
CONFIG_ZMK_IDLE_TIMEOUT=120000
# Disable deep sleep support
CONFIG_ZMK_SLEEP=n
# Disable soft off support
CONFIG_ZMK_PM_SOFT_OFF=n


# Layout ---------------------------------
# Enable key rotation information storage internally
CONFIG_ZMK_PHYSICAL_LAYOUT_KEY_ROTATION=y


# Behaviors -------------------------------
# Size of behavior event queue
CONFIG_ZMK_BEHAVIORS_QUEUE_SIZE=64
# Max number of simultaneous held keys for hold-tap behavior
CONFIG_ZMK_BEHAVIOR_HOLD_TAP_MAX_HELD=10
# Max number of captured events for hold-tap behavior
CONFIG_ZMK_BEHAVIOR_HOLD_TAP_MAX_CAPTURED_EVENTS=40
# Default wait time between macro events
CONFIG_ZMK_MACRO_DEFAULT_WAIT_MS=10
# Default tap time for macro events
CONFIG_ZMK_MACRO_DEFAULT_TAP_MS=30
# Max number of simultaneous held keys for sticky key behavior
CONFIG_ZMK_BEHAVIOR_STICKY_KEY_MAX_HELD=10
# Max number of simultaneous held keys for tap dance behavior
CONFIG_ZMK_BEHAVIOR_TAP_DANCE_MAX_HELD=10
# Max number of simultaneous pressed combos
CONFIG_ZMK_COMBO_MAX_PRESSED_COMBOS=4

# Keyboard Scan -----------------------------
# Size of event queue for kscan events
CONFIG_ZMK_KSCAN_EVENT_QUEUE_SIZE=4
# Global debounce press time (ms), -1 to use per-key settings
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=-1
# Global debounce release time (ms), -1 to use per-key settings
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=-1
# Disable direct polling mode for keyboard scanning (prefer using interrupts)
CONFIG_ZMK_KSCAN_DIRECT_POLLING=n
# Disable matrix polling mode for keyboard scanning (prefer using interrupts)
CONFIG_ZMK_KSCAN_MATRIX_POLLING=n
# Ticks to wait after scanning before processing inputs
CONFIG_ZMK_KSCAN_MATRIX_WAIT_BEFORE_INPUTS=0
# Ticks to wait between processing outputs
CONFIG_ZMK_KSCAN_MATRIX_WAIT_BETWEEN_OUTPUTS=0


# Mouse Keys -----------------------------
# Disable pointing device support
CONFIG_ZMK_POINTING=n
# Disable smooth scrolling
CONFIG_ZMK_POINTING_SMOOTH_SCROLLING=n


# Display ---------------------------------
# Enable display support
CONFIG_ZMK_DISPLAY=y
# Blank display on idle
CONFIG_ZMK_DISPLAY_BLANK_ON_IDLE=y
# Display update tick period in milliseconds
CONFIG_ZMK_DISPLAY_TICK_PERIOD_MS=10
# Disable display inversion
CONFIG_ZMK_DISPLAY_INVERT=n
# Enable layer status widget
CONFIG_ZMK_WIDGET_LAYER_STATUS=y
# Enable battery status widget
CONFIG_ZMK_WIDGET_BATTERY_STATUS=y
# Show battery percentage in battery status widget
CONFIG_ZMK_WIDGET_BATTERY_STATUS_SHOW_PERCENTAGE=y
# Enable output status widget (e.g. Caps Lock)
CONFIG_ZMK_WIDGET_OUTPUT_STATUS=y
# Enable WPM status widget
CONFIG_ZMK_WIDGET_WPM_STATUS=y
# Enable built-in status screen
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_BUILT_IN=y
# Disable custom status screen
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=n
# Use system work queue for display updates
CONFIG_ZMK_DISPLAY_WORK_QUEUE_SYSTEM=y
# Disable dedicated work queue for display updates
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=n


# Lighting -------------------------------

# RGB
# Disable RGB underglow support
CONFIG_ZMK_RGB_UNDERGLOW=n
# Disable underglow on external power only
CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n
# Disable underglow auto off on idle
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_IDLE=n
# Disable underglow auto off on USB connection
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_USB=n
# Default hue (in degrees)
CONFIG_ZMK_RGB_UNDERGLOW_HUE_START=0
# Default saturation
CONFIG_ZMK_RGB_UNDERGLOW_SAT_START=100
# Default brightness
CONFIG_ZMK_RGB_UNDERGLOW_BRT_START=100
# Default effect speed
CONFIG_ZMK_RGB_UNDERGLOW_SPD_START=3
# Step used by RGB Actions
CONFIG_ZMK_RGB_UNDERGLOW_HUE_STEP=10
# Step used by RGB Actions
CONFIG_ZMK_RGB_UNDERGLOW_BRT_STEP=10
# Step used by RGB Actions
CONFIG_ZMK_RGB_UNDERGLOW_SAT_STEP=10
# Default effect (0 = Solid, 1 = Breathe, 2 = Spectrum Cycle, 3 = Swirl)
CONFIG_ZMK_RGB_UNDERGLOW_EFF_START=0
# Disable underglow on start
CONFIG_ZMK_RGB_UNDERGLOW_ON_START=n
# Minimum brightness
CONFIG_ZMK_RGB_UNDERGLOW_BRT_MIN=0
# Maximum brightness
CONFIG_ZMK_RGB_UNDERGLOW_BRT_MAX=100

# Backlight
# Disable LED backlight support
CONFIG_ZMK_BACKLIGHT=n
# Brightness step in percent
CONFIG_ZMK_BACKLIGHT_BRT_STEP=20
# Default brightness in percent
CONFIG_ZMK_BACKLIGHT_BRT_START=40
# Disable backlight on start
CONFIG_ZMK_BACKLIGHT_ON_START=n
# Disable backlight auto off on idle
CONFIG_ZMK_BACKLIGHT_AUTO_OFF_IDLE=n
# Disable backlight auto off on USB disconnection
CONFIG_ZMK_BACKLIGHT_AUTO_OFF_USB=n


# Logging ---------------------------------
# Disable USB logging
CONFIG_ZMK_USB_LOGGING=n


# ZMK Studio ------------------------------
# Enable ZMK Studio (required for other studio features)
CONFIG_ZMK_STUDIO=y
# Max length for layer names
CONFIG_ZMK_KEYMAP_LAYER_NAME_MAX_LEN=20
# Enable ZMK Studio locking support
CONFIG_ZMK_STUDIO_LOCKING=y
# Lock keyboard when ZMK Studio disconnects
CONFIG_ZMK_STUDIO_LOCK_ON_DISCONNECT=y
# Lower latency to request while ZMK Studio is active to improve responsiveness
CONFIG_ZMK_STUDIO_TRANSPORT_BLE_PREF_LATENCY=10
# Stack size for the dedicated RPC
CONFIG_ZMK_STUDIO_RPC_THREAD_STACK_SIZE=1800
# Number of bytes available for buffering incoming messages
CONFIG_ZMK_STUDIO_RPC_RX_BUF_SIZE=30
# Number of bytes available for buffering outgoing messages
CONFIG_ZMK_STUDIO_RPC_TX_BUF_SIZE=64

